{
    "sourceFile": "discordbot.py",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 17,
            "patches": [
                {
                    "date": 1660355570039,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1660356143532,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,14 +3,14 @@\n import shelve\r\n import datetime\r\n import os\r\n import discord\r\n+from discord.ext import commands\r\n \r\n-from discord.ext import commands\r\n # import redis\r\n \r\n # redis_server = redis.Redis()\r\n-token = os.environ.get('DISCORD_TOKEN')\r\n+# token = os.environ.get('DISCORD_TOKEN')\r\n my_server = os.environ.get('MY_SERVER')\r\n league_logins = os.environ.get('LEAGUE_LOGINS')\r\n \r\n # depreciated code from when using a redis server to serve secrets\r\n"
                },
                {
                    "date": 1660356149009,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,8 +9,9 @@\n # import redis\r\n \r\n # redis_server = redis.Redis()\r\n # token = os.environ.get('DISCORD_TOKEN')\r\n+token = \"ODU1OTI0NTMyOTI0OTA3NTcx.GRcM-T.-XRARoELorEvEYVEvzzfHUqjwHSXYJzUKw7J8U\"\r\n my_server = os.environ.get('MY_SERVER')\r\n league_logins = os.environ.get('LEAGUE_LOGINS')\r\n \r\n # depreciated code from when using a redis server to serve secrets\r\n"
                },
                {
                    "date": 1660356158302,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,8 +11,9 @@\n # redis_server = redis.Redis()\r\n # token = os.environ.get('DISCORD_TOKEN')\r\n token = \"ODU1OTI0NTMyOTI0OTA3NTcx.GRcM-T.-XRARoELorEvEYVEvzzfHUqjwHSXYJzUKw7J8U\"\r\n my_server = os.environ.get('MY_SERVER')\r\n+league_logins = \"ag96857523\"\r\n league_logins = os.environ.get('LEAGUE_LOGINS')\r\n \r\n # depreciated code from when using a redis server to serve secrets\r\n # token = str(redis_server.get('DISCORD_TOKEN').decode('utf-8'))\r\n"
                },
                {
                    "date": 1660356163818,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,8 +11,9 @@\n # redis_server = redis.Redis()\r\n # token = os.environ.get('DISCORD_TOKEN')\r\n token = \"ODU1OTI0NTMyOTI0OTA3NTcx.GRcM-T.-XRARoELorEvEYVEvzzfHUqjwHSXYJzUKw7J8U\"\r\n my_server = os.environ.get('MY_SERVER')\r\n+my_server = \"362791753381707793\"\r\n league_logins = \"ag96857523\"\r\n league_logins = os.environ.get('LEAGUE_LOGINS')\r\n \r\n # depreciated code from when using a redis server to serve secrets\r\n"
                },
                {
                    "date": 1660356225974,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,12 +10,12 @@\n \r\n # redis_server = redis.Redis()\r\n # token = os.environ.get('DISCORD_TOKEN')\r\n token = \"ODU1OTI0NTMyOTI0OTA3NTcx.GRcM-T.-XRARoELorEvEYVEvzzfHUqjwHSXYJzUKw7J8U\"\r\n-my_server = os.environ.get('MY_SERVER')\r\n+# my_server = os.environ.get('MY_SERVER')\r\n my_server = \"362791753381707793\"\r\n league_logins = \"ag96857523\"\r\n-league_logins = os.environ.get('LEAGUE_LOGINS')\r\n+# league_logins = os.environ.get('LEAGUE_LOGINS')\r\n \r\n # depreciated code from when using a redis server to serve secrets\r\n # token = str(redis_server.get('DISCORD_TOKEN').decode('utf-8'))\r\n # my_server = str(redis_server.get('MY_SERVER').decode('utf-8'))\r\n@@ -26,11 +26,11 @@\n \r\n @bot.event\r\n async def on_ready():\r\n     print(f'{bot.user} has connected to Discord!')\r\n-    guild = discord.utils.find(lambda g: g.name == my_server, bot.guilds)\r\n-    guild = discord.utils.get(bot.guilds, name=my_server)\r\n-    print(f'Server:{guild.name}(id: {guild.id})')\r\n+    # guild = discord.utils.find(lambda g: g.name == my_server, bot.guilds)\r\n+    # guild = discord.utils.get(bot.guilds, name=my_server)\r\n+    # print(f'Server:{guild.name}(id: {guild.id})')\r\n \r\n # Helper function\r\n async def send_list_as_code(ctx, list, delay):\r\n     for item in list:\r\n"
                },
                {
                    "date": 1660356833041,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,8 +3,9 @@\n import shelve\r\n import datetime\r\n import os\r\n import discord\r\n+\r\n from discord.ext import commands\r\n \r\n # import redis\r\n \r\n"
                },
                {
                    "date": 1660357041080,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,9 +10,9 @@\n # import redis\r\n \r\n # redis_server = redis.Redis()\r\n # token = os.environ.get('DISCORD_TOKEN')\r\n-token = \"ODU1OTI0NTMyOTI0OTA3NTcx.GRcM-T.-XRARoELorEvEYVEvzzfHUqjwHSXYJzUKw7J8U\"\r\n+# token = \"ODU1OTI0NTMyOTI0OTA3NTcx.GRcM-T.-XRARoELorEvEYVEvzzfHUqjwHSXYJzUKw7J8U\"\r\n # my_server = os.environ.get('MY_SERVER')\r\n my_server = \"362791753381707793\"\r\n league_logins = \"ag96857523\"\r\n # league_logins = os.environ.get('LEAGUE_LOGINS')\r\n"
                },
                {
                    "date": 1660357154750,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,12 +10,12 @@\n # import redis\r\n \r\n # redis_server = redis.Redis()\r\n # token = os.environ.get('DISCORD_TOKEN')\r\n-# token = \"ODU1OTI0NTMyOTI0OTA3NTcx.GRcM-T.-XRARoELorEvEYVEvzzfHUqjwHSXYJzUKw7J8U\"\r\n+token = \"ODU1OTI0NTMyOTI0OTA3NTcx.GRcM-T.-XRARoELorEvEYVEvzzfHUqjwHSXYJzUKw7J8U\"\r\n # my_server = os.environ.get('MY_SERVER')\r\n my_server = \"362791753381707793\"\r\n-league_logins = \"ag96857523\"\r\n+league_logins = \"ag96857523\"]\r\n # league_logins = os.environ.get('LEAGUE_LOGINS')\r\n \r\n # depreciated code from when using a redis server to serve secrets\r\n # token = str(redis_server.get('DISCORD_TOKEN').decode('utf-8'))\r\n"
                },
                {
                    "date": 1660357166868,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,9 +13,9 @@\n # token = os.environ.get('DISCORD_TOKEN')\r\n token = \"ODU1OTI0NTMyOTI0OTA3NTcx.GRcM-T.-XRARoELorEvEYVEvzzfHUqjwHSXYJzUKw7J8U\"\r\n # my_server = os.environ.get('MY_SERVER')\r\n my_server = \"362791753381707793\"\r\n-league_logins = \"ag96857523\"]\r\n+league_logins = [\"ag96857523\"]\r\n # league_logins = os.environ.get('LEAGUE_LOGINS')\r\n \r\n # depreciated code from when using a redis server to serve secrets\r\n # token = str(redis_server.get('DISCORD_TOKEN').decode('utf-8'))\r\n@@ -27,11 +27,11 @@\n \r\n @bot.event\r\n async def on_ready():\r\n     print(f'{bot.user} has connected to Discord!')\r\n-    # guild = discord.utils.find(lambda g: g.name == my_server, bot.guilds)\r\n-    # guild = discord.utils.get(bot.guilds, name=my_server)\r\n-    # print(f'Server:{guild.name}(id: {guild.id})')\r\n+    guild = discord.utils.find(lambda g: g.name == my_server, bot.guilds)\r\n+    guild = discord.utils.get(bot.guilds, name=my_server)\r\n+    print(f'Server:{guild.name}(id: {guild.id})')\r\n \r\n # Helper function\r\n async def send_list_as_code(ctx, list, delay):\r\n     for item in list:\r\n"
                },
                {
                    "date": 1660357182187,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -27,11 +27,11 @@\n \r\n @bot.event\r\n async def on_ready():\r\n     print(f'{bot.user} has connected to Discord!')\r\n-    guild = discord.utils.find(lambda g: g.name == my_server, bot.guilds)\r\n-    guild = discord.utils.get(bot.guilds, name=my_server)\r\n-    print(f'Server:{guild.name}(id: {guild.id})')\r\n+    # guild = discord.utils.find(lambda g: g.name == my_server, bot.guilds)\r\n+    # guild = discord.utils.get(bot.guilds, name=my_server)\r\n+    # print(f'Server:{guild.name}(id: {guild.id})')\r\n \r\n # Helper function\r\n async def send_list_as_code(ctx, list, delay):\r\n     for item in list:\r\n"
                },
                {
                    "date": 1660357630847,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,12 +10,9 @@\n # import redis\r\n \r\n # redis_server = redis.Redis()\r\n # token = os.environ.get('DISCORD_TOKEN')\r\n-token = \"ODU1OTI0NTMyOTI0OTA3NTcx.GRcM-T.-XRARoELorEvEYVEvzzfHUqjwHSXYJzUKw7J8U\"\r\n # my_server = os.environ.get('MY_SERVER')\r\n-my_server = \"362791753381707793\"\r\n-league_logins = [\"ag96857523\"]\r\n # league_logins = os.environ.get('LEAGUE_LOGINS')\r\n \r\n # depreciated code from when using a redis server to serve secrets\r\n # token = str(redis_server.get('DISCORD_TOKEN').decode('utf-8'))\r\n"
                },
                {
                    "date": 1660357637554,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,14 +8,14 @@\n from discord.ext import commands\r\n \r\n # import redis\r\n \r\n-# redis_server = redis.Redis()\r\n-# token = os.environ.get('DISCORD_TOKEN')\r\n-# my_server = os.environ.get('MY_SERVER')\r\n-# league_logins = os.environ.get('LEAGUE_LOGINS')\r\n+token = os.environ.get('DISCORD_TOKEN')\r\n+my_server = os.environ.get('MY_SERVER')\r\n+league_logins = os.environ.get('LEAGUE_LOGINS')\r\n \r\n # depreciated code from when using a redis server to serve secrets\r\n+# redis_server = redis.Redis()\r\n # token = str(redis_server.get('DISCORD_TOKEN').decode('utf-8'))\r\n # my_server = str(redis_server.get('MY_SERVER').decode('utf-8'))\r\n # league_logins = str(redis_server.get('LEAGUE_LOGINS').decode('utf-8')).split('(NEWLINE)')\r\n # cmd = str(redis_server.get('CMD').decode('utf-8')).split('(NEWLINE)')\r\n"
                },
                {
                    "date": 1660357645518,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,9 +6,9 @@\n import discord\r\n \r\n from discord.ext import commands\r\n \r\n-# import redis\r\n+# import redis depr\r\n \r\n token = os.environ.get('DISCORD_TOKEN')\r\n my_server = os.environ.get('MY_SERVER')\r\n league_logins = os.environ.get('LEAGUE_LOGINS')\r\n"
                },
                {
                    "date": 1660360037139,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,14 +6,14 @@\n import discord\r\n \r\n from discord.ext import commands\r\n \r\n-# import redis depr\r\n+# import redis depreciated \r\n \r\n-token = os.environ.get('DISCORD_TOKEN')\r\n-my_server = os.environ.get('MY_SERVER')\r\n-league_logins = os.environ.get('LEAGUE_LOGINS')\r\n-\r\n+# token = os.environ.get('DISCORD_TOKEN')\r\n+# my_server = os.environ.get('MY_SERVER')\r\n+# league_logins = os.environ.get('LEAGUE_LOGINS')\r\n+# league_logins = os.environ.get('LEAGUE_LOGINS')\r\n # depreciated code from when using a redis server to serve secrets\r\n # redis_server = redis.Redis()\r\n # token = str(redis_server.get('DISCORD_TOKEN').decode('utf-8'))\r\n # my_server = str(redis_server.get('MY_SERVER').decode('utf-8'))\r\n"
                },
                {
                    "date": 1660360076853,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,12 +8,12 @@\n from discord.ext import commands\r\n \r\n # import redis depreciated \r\n \r\n-# token = os.environ.get('DISCORD_TOKEN')\r\n-# my_server = os.environ.get('MY_SERVER')\r\n-# league_logins = os.environ.get('LEAGUE_LOGINS')\r\n-# league_logins = os.environ.get('LEAGUE_LOGINS')\r\n+token = os.environ..get('DISCORD_TOKEN')\r\n+my_server = os.environ.get('MY_SERVER')\r\n+league_logins = os.environ.get('LEAGUE_LOGINS')\r\n+\r\n # depreciated code from when using a redis server to serve secrets\r\n # redis_server = redis.Redis()\r\n # token = str(redis_server.get('DISCORD_TOKEN').decode('utf-8'))\r\n # my_server = str(redis_server.get('MY_SERVER').decode('utf-8'))\r\n"
                },
                {
                    "date": 1660360264549,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,12 +8,13 @@\n from discord.ext import commands\r\n \r\n # import redis depreciated \r\n \r\n-token = os.environ..get('DISCORD_TOKEN')\r\n+token = os.environ.get('DISCORD_TOKEN')\r\n my_server = os.environ.get('MY_SERVER')\r\n league_logins = os.environ.get('LEAGUE_LOGINS')\r\n \r\n+\r\n # depreciated code from when using a redis server to serve secrets\r\n # redis_server = redis.Redis()\r\n # token = str(redis_server.get('DISCORD_TOKEN').decode('utf-8'))\r\n # my_server = str(redis_server.get('MY_SERVER').decode('utf-8'))\r\n"
                },
                {
                    "date": 1660360274101,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,10 +11,10 @@\n \r\n token = os.environ.get('DISCORD_TOKEN')\r\n my_server = os.environ.get('MY_SERVER')\r\n league_logins = os.environ.get('LEAGUE_LOGINS')\r\n+league_logins = [league]\r\n \r\n-\r\n # depreciated code from when using a redis server to serve secrets\r\n # redis_server = redis.Redis()\r\n # token = str(redis_server.get('DISCORD_TOKEN').decode('utf-8'))\r\n # my_server = str(redis_server.get('MY_SERVER').decode('utf-8'))\r\n"
                }
            ],
            "date": 1660355570039,
            "name": "Commit-0",
            "content": "import asyncio\r\nfrom asyncio.tasks import sleep\r\nimport shelve\r\nimport datetime\r\nimport os\r\nimport discord\r\n\r\nfrom discord.ext import commands\r\n# import redis\r\n\r\n# redis_server = redis.Redis()\r\ntoken = os.environ.get('DISCORD_TOKEN')\r\nmy_server = os.environ.get('MY_SERVER')\r\nleague_logins = os.environ.get('LEAGUE_LOGINS')\r\n\r\n# depreciated code from when using a redis server to serve secrets\r\n# token = str(redis_server.get('DISCORD_TOKEN').decode('utf-8'))\r\n# my_server = str(redis_server.get('MY_SERVER').decode('utf-8'))\r\n# league_logins = str(redis_server.get('LEAGUE_LOGINS').decode('utf-8')).split('(NEWLINE)')\r\n# cmd = str(redis_server.get('CMD').decode('utf-8')).split('(NEWLINE)')\r\n\r\nbot = commands.Bot(command_prefix='.')\r\n\r\n@bot.event\r\nasync def on_ready():\r\n    print(f'{bot.user} has connected to Discord!')\r\n    guild = discord.utils.find(lambda g: g.name == my_server, bot.guilds)\r\n    guild = discord.utils.get(bot.guilds, name=my_server)\r\n    print(f'Server:{guild.name}(id: {guild.id})')\r\n\r\n# Helper function\r\nasync def send_list_as_code(ctx, list, delay):\r\n    for item in list:\r\n        await ctx.send(f'```{item}```', delete_after=delay)\r\n\r\n#region League\r\n@bot.command(name='leag')\r\nasync def get_league_logins(ctx, delay=5):\r\n    await ctx.message.delete(delay=delay)\r\n    await send_list_as_code(ctx, league_logins, delay)\r\n\r\n@bot.command(name='league')\r\nasync def get_league_logins(ctx, delay=5):\r\n    await ctx.message.delete(delay=delay)\r\n    await send_list_as_code(ctx, league_logins, delay)\r\n#endregion\r\n\r\n#region CMD commands\r\n@bot.command(name='cmd')\r\nasync def get_cmd_shortcuts(ctx,delay=7):\r\n    await ctx.message.delete(delay=delay)\r\n    await send_list_as_code(ctx, cmd, delay)\r\n    print(f'cmd retrieved at: {str(datetime.datetime.now())}')\r\n#endregion\r\n\r\n#region Projects\r\n@bot.command(name='projects')\r\nasync def get_projects(ctx,delay=30):\r\n    await ctx.message.delete(delay=delay)\r\n    projects_file = shelve.open('projects')\r\n    await ctx.send(f'**{len(projects_file)} Projects**',delete_after=delay)\r\n    for i in range(1, len([*projects_file])):\r\n        p = i*4\r\n        try:\r\n            await ctx.send(f'\\n\\n**{[*projects_file][p-4].upper()}:**\\n{projects_file[[*projects_file][p-4]]}\\n\\n**{[*projects_file][p-3].upper()}:**\\n{projects_file[[*projects_file][p-3]]}\\n\\n**{[*projects_file][p-2].upper()}:**\\n{projects_file[[*projects_file][p-2]]}\\n\\n**{[*projects_file][p-1].upper()}:**\\n{projects_file[[*projects_file][p-1]]}',delete_after=delay)\r\n        except:\r\n            p -= 1\r\n            try:\r\n                await ctx.send(f'\\n\\n**{[*projects_file][p-3].upper()}:**\\n{projects_file[[*projects_file][p-3]]}\\n\\n**{[*projects_file][p-2].upper()}:**\\n{projects_file[[*projects_file][p-2]]}\\n\\n**{[*projects_file][p-1].upper()}:**\\n{projects_file[[*projects_file][p-1]]}',delete_after=delay)\r\n            except:\r\n                p -= 1\r\n                try:\r\n                    await ctx.send(f'\\n\\n**{[*projects_file][p-2].upper()}:**\\n{projects_file[[*projects_file][p-2]]}\\n\\n**{[*projects_file][p-1].upper()}:**\\n{projects_file[[*projects_file][p-1]]}',delete_after=delay)\r\n                except:\r\n                    p -= 1\r\n                    try:\r\n                        await ctx.send(f'\\n\\n**{[*projects_file][p-1].upper()}:**\\n{projects_file[[*projects_file][p-1]]}',delete_after=delay)\r\n                    except:\r\n                        pass\r\n    projects_file.close()\r\n    await ctx.send(f'**END**',delete_after=delay)\r\n\r\n@bot.command(name='add_project')\r\nasync def add(ctx, name, info):\r\n    await ctx.message.delete(delay=5)\r\n    name = name.upper()\r\n    projects_file = shelve.open('projects')\r\n    projects_file[name] = info\r\n    projects_file.close()\r\n    await ctx.send(f'Added \"**{name}**\" to projects.\\n{info}', delete_after=7)\r\n\r\n@bot.command(name='remove_project')\r\nasync def remove_project(ctx, name):\r\n    await ctx.message.delete(delay=7)\r\n    name = name.upper()\r\n    projects_file = shelve.open('projects')\r\n    del projects_file[name]\r\n    projects_file.close()\r\n    await ctx.send(f'\"{name}\" removed from projects.', delete_after=7)\r\n\r\n@bot.command(name='delete_project')\r\nasync def remove_project(ctx, name):\r\n    await ctx.message.delete(delay=7)\r\n    name = name.upper()\r\n    projects_file = shelve.open('projects')\r\n    del projects_file[name]\r\n    projects_file.close()\r\n    await ctx.send(f'\"{name}\" removed from projects.', delete_after=7)\r\n\r\n@bot.command(name='append_project')\r\nasync def append_project(ctx, name, appendage):\r\n    await ctx.message.delete(delay=7)\r\n    name = name.upper()\r\n    projects_file = shelve.open('projects')\r\n    projects_file[name] += f'\\n{appendage}'\r\n    projects_file.close()\r\n    await ctx.send(f'\"{appendage}\" has been added to \"{name}.\"', delete_after=7)\r\n#endregion\r\n\r\n@bot.command(name='commands')\r\nasync def help(ctx, delay=30):\r\n    await ctx.message.delete(delay=delay)\r\n    await ctx.send(\r\n        f'4 Commands', delete_after=delay)\r\n    await ctx.send(\r\n        f'**.projects (delay)**\\nDisplays all items in the projects list for (delay) seconds.',\r\n        delete_after=delay)\r\n    await ctx.send(\r\n        f'**.add_project \"(name)\" \"(description)\"**\\nAdds a project to the projects list with (name) and (description).',\r\n        delete_after=delay)\r\n    await ctx.send(\r\n        f'**.remove_project \"(name)\"**\\nRemoves a project from the projects list by (name).',\r\n        delete_after=delay)\r\n    await ctx.send(\r\n        f'**.append_project \"(name)\" \"(appendage)\"**\\nAdds (appendage) to the description of the project (name).',\r\n        delete_after=delay)\r\n\r\nbot.run(token)"
        }
    ]
}